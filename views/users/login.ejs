<%- include('../partials/header') %>
<div class="text-center mt-5 mb-5">
    <div class="container align-self- border regcon" style="max-width: 500px;">
        <div class="header__logo">
            <a href="./index.html"><img src="img/logo.png" alt=""></a>
        </div>
        <div class="title regtit mb-2">
            <h2 class="pb-3 pt-3">Login</h2>
            <% if(locals.message) { %>
                <span id="message" class="alert text-warning text-center message" role="alert"><%= message %></span>
            <% } %>
            <div id="error" class="text-warning fw-bold text-center"></div>
            <form action="/login" method="post" id="form">
                <div class="mb-3">
                    <input type="text" name="userName" class="form-control" placeholder="Enter Username" id="userName">
                </div>
                <div class="mb-3">
                    <input type="password" name="password" class="form-control" placeholder="Enter Password" id="password">
                </div>
                <button type="submit" class="btn btn-primary mb-4">Submit</button>
            </form>
            <a href="/auth/google" class="w-75 btn btn-secondary rounded-pill mb-4">Continue with Google</a><br>
            <span class="text-dark mb-2">Don't have an account? <a class="text-decoration-none" href="/register">Sign up!</a></span><br>
        </div>
    </div>
</div>



<script>
    setTimeout(() => {
        const messageDiv = document.getElementById('message');
        if (messageDiv) {
            messageDiv.remove();
        }
    }, 5000);
</script>
<script>
    
    let form = document.getElementById("form");
    let error = document.getElementById("error");
    let message = [];

    form.addEventListener("submit", (e) => {
        message = [];
        let userName = document.getElementById("userName").value.trim();
        let password = document.getElementById("password").value.trim();
        
        if (!userName) {
            message.push("Username is required");
        }
        
        if (!password) {
            message.push("Password is required");
        }
        
        if (message.length > 0) {
            e.preventDefault();
            error.innerText = message[0];
        }
    });
</script>

<%- include('../partials/footer') %>